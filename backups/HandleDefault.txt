profile.HandleDefault = function()
    local player = gData.GetPlayer();
    local environment = gData.GetEnvironment();
    local pet = gData.GetPet();
    
    if (string.match(environment.Area, 'Port*')) or (string.match(environment.Area, 'Lower Jeuno')) or (string.match(environment.Area, 'Upper Jeuno')) or (string.match(environment.Area, 'Ru\'Lude*')) or (string.match(environment.Area, '*Whitegate')) or (string.match(environment.Area, 'Nashmau')) or (string.match(environment.Area, 'Bastok*')) or (string.match(environment.Area, 'Metalworks')) or (string.match(environment.Area, 'Windurst*')) or (string.match(environment.Area, 'Heavens*')) or (string.match(environment.Area, 'Kazham')) or (string.match(environment.Area, 'Norg')) or (string.match(environment.Area, 'Rabao')) or (string.match(environment.Area, 'Southern San d\'Oria')) or (string.match(environment.Area, 'Northern San d\'Oria')) or (string.match(environment.Area, 'Port San d\'Oria')) or (string.match(environment.Area, 'Chateau*')) then
	gFunc.EquipSet(profile.Sets.Town);
    end
    
    if (petAction ~= nil and petAction.Name ~= "") then
        petAction.Name = string.sub(petAction.Name, 1, #petAction.Name - 1);
        if (PetPhys:contains(petAction.Name)) then
            HandlePetAction("phys");
            return;
        elseif (PetMab:contains(petAction.Name)) then
            HandlePetAction("mab");
            return;
        elseif (PetMacc:contains(petAction.Name)) then
            HandlePetAction("macc");
            return;
        end
		local petAction = gData.GetPetAction();
    end
	--[[
		My recommendation here is to make equipsets for TP specifically and use them in the 'Eganged' section. Reason being is that you will likely get
		dusk gear and that will slow you down outside of combat.
		
		if (player.Status == 'Engaged') then
			if (player.SubJob == 'NIN') then
				gFunc.EquipSet(profile.Sets.TPDW);
			elseif (player.SubJob == 'THF' or player.SubJob == 'WHM' or player.SubJob == 'WAR') then
				gFunc.EquipSet(profile.Sets.TPOH);
			end
		end
		
	]]--
    if (player.Status == 'Engaged') then
		if (player.SubJob == 'NIN') then
			gFunc.EquipSet(profile.Sets.IdleDW);
		elseif (player.SubJob == 'THF' or player.SubJob == 'WHM' or player.SubJob == 'WAR') then
			gFunc.EquipSet(profile.Sets.IdleOH);
		end
    end
	        
	if (Settings.UseTH == true) then
		gFunc.EquipSet(profile.Sets.TH);
	end
	
	if (player.Status == 'Resting') then
		gFunc.EquipSet(profile.Sets.Resting);
	end
		
	if (player.IsMoving == true) then
		gFunc.EquipSet(profile.Sets.Movement);
	end
	
	if (player.Status == 'Idle') then
            if (player.SubJob == 'NIN') then
			gFunc.EquipSet(profile.Sets.IdleDW);
	    elseif (player.SubJob == 'THF' or player.SubJob == 'WHM' or player.SubJob == 'WAR') then
			gFunc.EquipSet(profile.Sets.IdleOH);
	    end
        end
end